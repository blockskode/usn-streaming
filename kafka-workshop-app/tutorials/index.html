<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GNS for 1D Heat Equation - Complete Guide</title>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 1000px;
            margin: 40px auto;
            padding: 20px;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
        }
        .container {
            background: white;
            padding: 50px;
            border-radius: 15px;
            box-shadow: 0 10px 40px rgba(0,0,0,0.3);
        }
        h1 {
            color: #2c3e50;
            text-align: center;
            font-size: 2.8em;
            margin-bottom: 20px;
            border-bottom: 4px solid #3498db;
            padding-bottom: 20px;
        }
        .subtitle {
            text-align: center;
            color: #7f8c8d;
            font-size: 1.3em;
            margin-bottom: 40px;
        }
        .intro {
            background: #f8f9fa;
            padding: 25px;
            border-left: 5px solid #3498db;
            margin: 30px 0;
            border-radius: 5px;
        }
        .parts-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 30px;
            margin: 40px 0;
        }
        .part-card {
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            padding: 30px;
            border-radius: 10px;
            color: white;
            text-decoration: none;
            transition: transform 0.3s, box-shadow 0.3s;
            box-shadow: 0 5px 15px rgba(0,0,0,0.2);
        }
        .part-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        }
        .part-number {
            font-size: 3em;
            font-weight: bold;
            opacity: 0.3;
            margin: 0;
        }
        .part-title {
            font-size: 1.8em;
            font-weight: bold;
            margin: 15px 0 10px 0;
        }
        .part-description {
            font-size: 1em;
            opacity: 0.9;
            line-height: 1.6;
        }
        .part-topics {
            margin-top: 20px;
            padding-top: 20px;
            border-top: 1px solid rgba(255,255,255,0.3);
        }
        .part-topics ul {
            margin: 10px 0;
            padding-left: 20px;
        }
        .part-topics li {
            margin: 8px 0;
        }
        .workflow {
            background: #e8f4f8;
            padding: 30px;
            border-radius: 10px;
            margin: 40px 0;
        }
        .workflow h2 {
            color: #2c3e50;
            margin-top: 0;
        }
        .workflow-step {
            background: white;
            padding: 20px;
            margin: 15px 0;
            border-left: 4px solid #3498db;
            border-radius: 5px;
        }
        .workflow-step strong {
            color: #2980b9;
            display: block;
            font-size: 1.2em;
            margin-bottom: 10px;
        }
        .code-block {
            background: #282c34;
            color: #abb2bf;
            padding: 20px;
            border-radius: 5px;
            margin: 10px 0;
            overflow-x: auto;
        }
        .note {
            background: #fff3cd;
            border-left: 4px solid #ffc107;
            padding: 20px;
            margin: 30px 0;
            border-radius: 5px;
        }
        footer {
            text-align: center;
            margin-top: 50px;
            padding-top: 30px;
            border-top: 2px solid #ecf0f1;
            color: #7f8c8d;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>Graph Network-based Simulator (GNS)<br>for 1D Heat Equation</h1>
        <div class="subtitle">A Complete Beginner-Friendly Tutorial</div>

        <div class="intro">
            <h2 style="margin-top: 0;">What You'll Learn</h2>
            <p>This complete guide teaches you how to implement and train a Graph Network-based Simulator (GNS) from scratch to learn physics from data. You'll understand both the theory and practice of using Graph Neural Networks for physical simulations.</p>
            <p><strong>No prior knowledge of GNNs required!</strong> We start from first principles and build up to a working implementation.</p>
        </div>

        <div style="background: #e8f4f8; border-left: 5px solid #3498db; padding: 20px; margin: 30px 0; border-radius: 5px;">
            <h3 style="margin-top: 0; color: #2c3e50;">Key Clarification: What is a "Particle"?</h3>
            <p>In this tutorial, <strong>"particle"</strong> refers to a <strong>fixed grid point</strong> on the rod, NOT a moving physical particle like an atom or molecule!</p>
            <ul>
                <li>We divide the rod into N discrete measurement points</li>
                <li>Each point is called a "particle" in GNS terminology</li>
                <li>These points <strong>never move</strong> - they're fixed spatial locations</li>
                <li>What changes is the <strong>temperature field</strong> at each fixed location</li>
            </ul>
            <p>This is an <strong>Eulerian (fixed grid)</strong> approach, not a Lagrangian (moving particles) approach. Both types work with GNS!</p>
        </div>

        <div class="parts-grid">
            <a href="1D_Heat_Equation_GNS_Part1_Setup.html" class="part-card">
                <p class="part-number">PART 1</p>
                <h3 class="part-title">Problem Setup</h3>
                <p class="part-description">Understand the 1D heat equation and how to represent it for GNS.</p>
                <div class="part-topics">
                    <strong>Topics Covered:</strong>
                    <ul>
                        <li>The Physical Problem</li>
                        <li>Mathematical Equations</li>
                        <li>Boundary & Initial Conditions</li>
                        <li>Particle-Based Representation</li>
                        <li>Traditional Numerical Methods</li>
                        <li>Why This is Good for GNS</li>
                        <li>Graph Structure Design</li>
                    </ul>
                </div>
            </a>

            <a href="GNS_Part2_Implementation.html" class="part-card" style="background: linear-gradient(135deg, #f093fb 0%, #f5576c 100%);">
                <p class="part-number">PART 2</p>
                <h3 class="part-title">Implementation & Training</h3>
                <p class="part-description">Build, train, and evaluate a complete GNS implementation.</p>
                <div class="part-topics">
                    <strong>Topics Covered:</strong>
                    <ul>
                        <li>GNS Inputs and Outputs (CRITICAL)</li>
                        <li>GNS Architecture (Encoder/Processor/Decoder)</li>
                        <li>Preparing Training Data</li>
                        <li>Training & Normalization</li>
                        <li>Autoregressive Rollout (CRITICAL - How Predictions Work!)</li>
                        <li>One-Step Prediction ‚Üí Multi-Step Forecasting</li>
                        <li>Evaluation & Error Accumulation</li>
                        <li>Complete Workflow</li>
                    </ul>
                </div>
            </a>
        </div>

        <div class="workflow">
            <h2>Complete Workflow</h2>

            <div class="workflow-step">
                <strong>Step 1: Understand the Problem</strong>
                Read <a href="1D_Heat_Equation_GNS_Part1_Setup.html">Part 1</a> to understand the heat equation, boundary conditions, and how to represent physics as a graph.
            </div>

            <div class="workflow-step">
                <strong>Step 2: Generate Training Data</strong>
                <div class="code-block">python heat_equation_traditional.py</div>
                This solves the heat equation with Crank-Nicolson method and generates ground truth data.
            </div>

            <div class="workflow-step">
                <strong>Step 3: Learn GNS Theory</strong>
                Read <a href="GNS_Complete_Tutorial.html">Part 2</a> to understand how GNS works, message passing, and the Encode-Process-Decode architecture.
            </div>

            <div class="workflow-step">
                <strong>Step 4: Train the GNS Model</strong>
                <div class="code-block">python train_gns.py</div>
                Train the GNS to predict accelerations from particle states (~25-30 min for 5 epochs).
            </div>

            <div class="workflow-step">
                <strong>Step 5: Evaluate Generalization</strong>
                <div class="code-block">python evaluate_gns.py</div>
                Test if GNS can predict 100√ó longer trajectories than it was trained on!
            </div>
        </div>

        <div class="note">
            <h3 style="margin-top: 0;">Dataset Format</h3>
            <p><strong>Question:</strong> Is the training dataset saved in a CSV file?</p>
            <p><strong>Answer:</strong> No, the training data is saved as <code>output/heat_equation_data.npz</code> (NumPy compressed format) because:</p>
            <ul>
                <li>Much faster to load (binary format)</li>
                <li>Smaller file size (compressed)</li>
                <li>Preserves multidimensional arrays (CSV is only 2D)</li>
                <li>Preserves data types exactly</li>
            </ul>
            <p>If you need CSV, you can export specific parts using pandas:</p>
            <div class="code-block">import numpy as np
import pandas as pd

data = np.load('output/heat_equation_data.npz', allow_pickle=True)
df = pd.DataFrame(data['u'])
df['time'] = data['t']
df.to_csv('output/temperatures.csv', index=False)</div>
        </div>

        <div style="background: #f8d7da; border-left: 4px solid #dc3545; padding: 25px; margin: 30px 0; border-radius: 5px;">
            <h3 style="margin-top: 0; color: #721c24;">IMPORTANT: GNS Error Accumulation?</h3>
            <p style="color: #721c24;">If your GNS error grows rapidly during rollout (e.g., from 0.01¬∞C to 50¬∞C):</p>
            <ul style="color: #721c24;">
                <li><strong><a href="GNS_TRAINING_ISSUES_AND_FIXES.md" style="color: #721c24;">GNS_TRAINING_ISSUES_AND_FIXES.md</a></strong> - Complete diagnosis and fixes</li>
                <li><strong><a href="NEXT_STEPS.md" style="color: #721c24;">NEXT_STEPS.md</a></strong> - Quick action plan to fix the issue</li>
            </ul>
            <p style="color: #721c24; margin: 0;"><strong>Root cause:</strong> Broken acceleration computation in training data. Follow the guides above to fix!</p>
        </div>

        <div style="background: #d1ecf1; border-left: 4px solid #0c5460; padding: 25px; margin: 30px 0; border-radius: 5px;">
            <h3 style="margin-top: 0; color: #0c5460;">Understanding GNS Architecture</h3>
            <ul style="color: #0c5460;">
                <li><strong><a href="../GNS_INPUT_AND_AUTOREGRESSION_EXPLAINED.md" style="color: #0c5460;">GNS_INPUT_AND_AUTOREGRESSION_EXPLAINED.md</a></strong> - <span style="background: #ff6b6b; color: white; padding: 2px 6px; border-radius: 3px; font-weight: bold;">‚≠ê MUST READ!</span>
                    <br><span style="font-size: 0.9em;">‚Ä¢ <strong>What is the model input?</strong> (Position, temperature, velocity at ONE timestep)<br>
                    ‚Ä¢ <strong>How does autoregression work?</strong> (Output becomes next input in a loop!)<br>
                    ‚Ä¢ <strong>Why only one timestep input?</strong> (Markov property)<br>
                    ‚Ä¢ Training vs Evaluation (ground truth vs autoregression)<br>
                    ‚Ä¢ Complete code walkthrough with visual diagrams<br>
                    ‚Ä¢ <strong>Answers the #1 question: "How does GNS predict the future?"</strong></span>
                </li>
                <li style="margin-top: 15px;"><strong><a href="GNS_INPUTS_AND_OUTPUTS.md" style="color: #0c5460;">GNS_INPUTS_AND_OUTPUTS.md</a></strong> - <span style="background: #fff3cd; padding: 2px 6px; border-radius: 3px; font-weight: bold;">START HERE!</span>
                    <br><span style="font-size: 0.9em;">‚Ä¢ What data goes INTO GNS? ([position, temperature, velocity])<br>
                    ‚Ä¢ What comes OUT of GNS? (acceleration)<br>
                    ‚Ä¢ Complete examples with real numbers<br>
                    ‚Ä¢ Visual diagrams of data flow<br>
                    ‚Ä¢ <strong>The most important document to understand GNS!</strong></span>
                </li>
                <li style="margin-top: 15px;"><strong><a href="HOW_GNS_PREDICTS.md" style="color: #0c5460;">HOW_GNS_PREDICTS.md</a></strong> - Complete guide to GNS prediction mechanism
                    <br><span style="font-size: 0.9em;">‚Ä¢ Where does prediction happen? (Decoder!)<br>
                    ‚Ä¢ What are the inputs? (Current state: position, temp, velocity - NOT time!)<br>
                    ‚Ä¢ What are the outputs? (Acceleration - the physics!)<br>
                    ‚Ä¢ Why no time input? (Markovian property)</span>
                </li>
                <li style="margin-top: 15px;"><strong><a href="WHY_POSITION_TEMPERATURE_VELOCITY.md" style="color: #0c5460;">WHY_POSITION_TEMPERATURE_VELOCITY.md</a></strong> - Why these specific inputs?
                    <br><span style="font-size: 0.9em;">‚Ä¢ Why position? (Boundary awareness, spatial structure)<br>
                    ‚Ä¢ Why temperature? (Solution variable, state of system)<br>
                    ‚Ä¢ Why velocity? (Markov property, temporal context)<br>
                    ‚Ä¢ Why not acceleration? (That's what we're learning!)<br>
                    ‚Ä¢ How this changes for different PDEs</span>
                </li>
                <li style="margin-top: 15px;"><strong><a href="UNDERSTANDING_MIXED_DERIVATIVES.md" style="color: #0c5460;">UNDERSTANDING_MIXED_DERIVATIVES.md</a></strong> - Why ‚àÇv/‚àÇt = Œ± ‚àÇ¬≤v/‚àÇx¬≤?
                    <br><span style="font-size: 0.9em;">‚Ä¢ Time derivative on left, space derivative on right?<br>
                    ‚Ä¢ How PDEs couple time and space<br>
                    ‚Ä¢ Swapping order of derivatives (Schwarz's theorem)<br>
                    ‚Ä¢ Complete mathematical derivation<br>
                    ‚Ä¢ Physical interpretation with examples</span>
                </li>
                <li style="margin-top: 15px;"><strong><a href="NOTATION_CLARIFICATION.md" style="color: #0c5460;">NOTATION_CLARIFICATION.md</a></strong> - Understanding notation: x vs [x, u, v]
                    <br><span style="font-size: 0.9em;">‚Ä¢ Is x position or state vector?<br>
                    ‚Ä¢ Scalar vs vector notation (x·µ¢ vs ùê±·µ¢)<br>
                    ‚Ä¢ ‚àÇu/‚àÇt vs du/dt (partial vs total derivative)<br>
                    ‚Ä¢ How the code represents state<br>
                    ‚Ä¢ Standard GNS notation explained</span>
                </li>
            </ul>
        </div>

        <div style="background: #fff3cd; border-left: 4px solid #ffc107; padding: 25px; margin: 30px 0; border-radius: 5px;">
            <h3 style="margin-top: 0; color: #856404;">Additional Documentation</h3>
            <p style="color: #856404;">Stuck on something? Check out these detailed guides:</p>
            <ul style="color: #856404;">
                <li><strong><a href="QUICK_REFERENCE.md" style="color: #856404;">QUICK_REFERENCE.md</a></strong> - Complete overview of all documentation and commands</li>
                <li><strong><a href="FILE_STRUCTURE.md" style="color: #856404;">FILE_STRUCTURE.md</a></strong> - Visual file tree and navigation guide</li>
                <li><strong><a href="PROJECT_STATUS.md" style="color: #856404;">PROJECT_STATUS.md</a></strong> - Current completion status and next steps</li>
                <li><strong><a href="CSV_FORMAT_EXPLAINED.md" style="color: #856404;">CSV_FORMAT_EXPLAINED.md</a></strong> - Why timesteps repeat in CSV (long format)</li>
                <li><strong><a href="EVALUATION_EXPLAINED.md" style="color: #856404;">EVALUATION_EXPLAINED.md</a></strong> - Step-by-step evaluation process</li>
                <li><strong><a href="WHY_ROLLOUT_IS_SLOW.md" style="color: #856404;">WHY_ROLLOUT_IS_SLOW.md</a></strong> - Why evaluation takes 5-10 minutes</li>
                <li><strong><a href="README_GNS.md" style="color: #856404;">README_GNS.md</a></strong> - Quick start guide with installation instructions</li>
            </ul>
        </div>

        <div style="background: #d4edda; border-left: 4px solid #28a745; padding: 25px; margin: 30px 0; border-radius: 5px;">
            <h3 style="margin-top: 0; color: #155724;">By the End of This Tutorial</h3>
            <p style="color: #155724; margin: 0;">You will have:</p>
            <ul style="color: #155724;">
                <li>Deep understanding of the heat equation and numerical methods</li>
                <li>Complete knowledge of Graph Neural Networks and message passing</li>
                <li>Working GNS implementation in PyTorch</li>
                <li>Trained model that learns physics from data</li>
                <li>Validation that GNS can generalize 100√ó beyond training data</li>
                <li>Practical experience with hyperparameter tuning and troubleshooting</li>
            </ul>
        </div>

        <footer>
            <p><strong>Ready to get started?</strong></p>
            <p>Begin with <a href="1D_Heat_Equation_GNS_Part1_Setup.html">Part 1: Problem Setup</a> or check the <a href="QUICK_REFERENCE.md">Quick Reference</a></p>
            <p style="margin-top: 30px; font-size: 0.9em;">Based on: Sanchez-Gonzalez et al., "Learning to Simulate Complex Physics with Graph Networks", ICML 2020</p>
        </footer>
    </div>
</body>
</html>
